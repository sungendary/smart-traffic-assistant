"""
ìˆ˜ì›íŠ¹ë¡€ì‹œ ë‚´ ì±Œë¦°ì§€ ì¹´í…Œê³ ë¦¬ ë° ì¥ì†Œ ì´ˆê¸° ë°ì´í„° ì‚½ì… ìŠ¤í¬ë¦½íŠ¸

5ê°œ ì¹´í…Œê³ ë¦¬:
1. ë¯¸ì‹ íƒí—˜ëŒ€ - ì „í†µì‹œì¥, ë§›ì§‘ê±°ë¦¬, ìŒì‹ ê´€ë ¨ ì¥ì†Œ
2. ê°ì„ ê¸°ë¡ê´€ - ë°•ë¬¼ê´€, ë¯¸ìˆ ê´€, ê°¤ëŸ¬ë¦¬, ì‚¬ì§„ ëª…ì†Œ
3. ì—ë„ˆì§€ ì¶©ì „ì†Œ - ê³µì›, ì²´í—˜ ì‹œì„¤, í™œë™ ì¥ì†Œ
4. ì§€ì‹ êµí™˜ì†Œ - ë„ì„œê´€, êµìœ¡ ì‹œì„¤, ì „ì‹œê´€
5. íë§ ì•ˆì‹ì²˜ - ì¹´í˜, ê³µì›, ìì—° íœ´ì–‘ì§€

ê° ì¹´í…Œê³ ë¦¬ë³„ 5ê°œì”© ì´ 25ê°œ ì¥ì†Œ
"""

import asyncio
import sys
from pathlib import Path
from datetime import datetime

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ Python ê²½ë¡œì— ì¶”ê°€
project_root = Path(__file__).resolve().parents[2]
sys.path.insert(0, str(project_root))

from bson import ObjectId

from app.core.config import settings
from app.db.mongo import MongoConnectionManager
from app.services.challenge_categories import create_challenge_category
from app.services.challenge_places import create_challenge_place

# ì¹´í…Œê³ ë¦¬ ì •ì˜
CATEGORIES = [
    {
        "name": "ë¯¸ì‹ íƒí—˜ëŒ€",
        "description": "ìˆ˜ì›ì˜ ë‹¤ì–‘í•œ ë§›ì§‘ê³¼ ì „í†µ ìŒì‹ì„ íƒí—˜í•˜ëŠ” ì¹´í…Œê³ ë¦¬",
        "icon": "ğŸ½ï¸",
    },
    {
        "name": "ê°ì„ ê¸°ë¡ê´€",
        "description": "ì¶”ì–µì„ ê¸°ë¡í•˜ê³  ê°ìƒí•  ìˆ˜ ìˆëŠ” ë¬¸í™” ì˜ˆìˆ  ê³µê°„",
        "icon": "ğŸ“¸",
    },
    {
        "name": "ì—ë„ˆì§€ ì¶©ì „ì†Œ",
        "description": "í™œë™ì ì´ê³  ì—­ë™ì ì¸ ì²´í—˜ê³¼ ëª¨í—˜ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì¥ì†Œ",
        "icon": "âš¡",
    },
    {
        "name": "ì§€ì‹ êµí™˜ì†Œ",
        "description": "ë°°ì›€ê³¼ ì§€ì‹ì„ ê³µìœ í•˜ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„",
        "icon": "ğŸ“š",
    },
    {
        "name": "íë§ ì•ˆì‹ì²˜",
        "description": "í‰ì˜¨í•˜ê³  ì—¬ìœ ë¡œìš´ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” íë§ ì¥ì†Œ",
        "icon": "ğŸŒ¿",
    },
]

# ì¹´í…Œê³ ë¦¬ë³„ ì±Œë¦°ì§€ ì¥ì†Œ ë°ì´í„°
CHALLENGE_PLACES = {
    "ë¯¸ì‹ íƒí—˜ëŒ€": [
        {
            "name": "ìˆ˜ì› ë‚¨ë¬¸ì‹œì¥",
            "description": "ë‹¤ì–‘í•œ ì „í†µ ìŒì‹ê³¼ ê°„ì‹ì„ ë§›ë³¼ ìˆ˜ ìˆëŠ” ì „í†µì‹œì¥. í•¨ê»˜ ì‹œì¥ì„ íƒë°©í•˜ë©° ë¯¸ì‹ ê²½í—˜ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2806,
            "longitude": 127.0144,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ë‚¨ë¬¸ë¡œ 92",
            "tags": ["ìŒì‹", "ì‹œì¥", "ì „í†µ", "ë¯¸ì‹"],
            "badge_reward": "ğŸœ",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ê°ˆë¹„ê³¨ëª©",
            "description": "ìˆ˜ì›ì˜ ëŒ€í‘œ ìŒì‹ì¸ ìˆ˜ì›ì™•ê°ˆë¹„ë¥¼ ë§›ë³¼ ìˆ˜ ìˆëŠ” ìœ ëª… ê³¨ëª©. í•¨ê»˜ ë§›ìˆëŠ” ì‹ì‚¬ë¥¼ ì¦ê¸°ë©° ëŒ€í™”ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2878,
            "longitude": 127.0133,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ë§í¬ë™",
            "tags": ["ìŒì‹", "ê°ˆë¹„", "ì „í†µ", "ë¯¸ì‹"],
            "badge_reward": "ğŸ¥©",
            "points_reward": 500,
        },
        {
            "name": "ê´‘êµí˜¸ìˆ˜ ìˆ˜ì œë²„ê±°ê±°ë¦¬",
            "description": "ë‹¤ì–‘í•œ ìˆ˜ì œë²„ê±°ì™€ í•«ë„ê·¸ë¥¼ ë§›ë³¼ ìˆ˜ ìˆëŠ” ê±°ë¦¬. í¸ì•ˆí•œ ë¶„ìœ„ê¸°ì—ì„œ ê°€ë²¼ìš´ ì‹ì‚¬ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2867,
            "longitude": 127.0522,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµí˜¸ìˆ˜ë¡œ",
            "tags": ["ìŒì‹", "ë²„ê±°", "ì¹´í˜", "ë°ì´íŠ¸"],
            "badge_reward": "ğŸ”",
            "points_reward": 500,
        },
        {
            "name": "ì˜í†µ ë²ˆê°œì‹œì¥",
            "description": "ë‹¤ì–‘í•œ ê¸¸ê±°ë¦¬ ìŒì‹ê³¼ íŠ¹ìƒ‰ ìˆëŠ” ë§›ì§‘ë“¤ì´ ëª¨ì—¬ ìˆëŠ” ì•¼ì‹œì¥. ì €ë… ì‹œê°„ëŒ€ì— ë°©ë¬¸í•˜ë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤.",
            "latitude": 37.2522,
            "longitude": 127.0717,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›ì²œë™",
            "tags": ["ìŒì‹", "ì•¼ì‹œì¥", "ê¸¸ê±°ë¦¬ìŒì‹", "ë¯¸ì‹"],
            "badge_reward": "ğŸŒ®",
            "points_reward": 500,
        },
        {
            "name": "í–‰ê¶ë™ ë§›ì§‘ê±°ë¦¬",
            "description": "ìˆ˜ì› í™”ì„± ì£¼ë³€ì— ìœ„ì¹˜í•œ ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°ì˜ ë§›ì§‘ê±°ë¦¬. ë‹¤ì–‘í•œ ë ˆìŠ¤í† ë‘ê³¼ ì¹´í˜ê°€ ì¦ë¹„í•©ë‹ˆë‹¤.",
            "latitude": 37.2861,
            "longitude": 127.0167,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ í–‰ê¶ë¡œ",
            "tags": ["ìŒì‹", "ë§›ì§‘", "ë°ì´íŠ¸", "ë¡œë§¨í‹±"],
            "badge_reward": "ğŸ",
            "points_reward": 500,
        },
    ],
    "ê°ì„ ê¸°ë¡ê´€": [
        {
            "name": "ìˆ˜ì›í™”ì„±ë°•ë¬¼ê´€",
            "description": "ìˆ˜ì› í™”ì„±ì˜ ì—­ì‚¬ì™€ ë¬¸í™”ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ë°•ë¬¼ê´€. í•¨ê»˜ ì—­ì‚¬ë¥¼ ë°°ìš°ë©° ì¶”ì–µì„ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2892,
            "longitude": 127.0125,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì •ì¡°ë¡œ 825",
            "tags": ["ë°•ë¬¼ê´€", "ì—­ì‚¬", "ë¬¸í™”", "êµìœ¡"],
            "badge_reward": "ğŸ›ï¸",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ì‹œë¦½ì•„ì´íŒŒí¬ë¯¸ìˆ ê´€",
            "description": "ë‹¤ì–‘í•œ í˜„ëŒ€ ë¯¸ìˆ  ì‘í’ˆì„ ê°ìƒí•˜ë©° ì˜ˆìˆ ì  ê°ì„±ì„ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë¬¸í™” ê³µê°„ì…ë‹ˆë‹¤.",
            "latitude": 37.2633,
            "longitude": 127.0286,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 399",
            "tags": ["ë¬¸í™”", "ì˜ˆìˆ ", "ë¯¸ìˆ ê´€", "ì‹¤ë‚´"],
            "badge_reward": "ğŸ¨",
            "points_reward": 500,
        },
        {
            "name": "í™”ì„±í–‰ê¶",
            "description": "ì¡°ì„ ì‹œëŒ€ ì™•ì˜ í–‰ê¶ìœ¼ë¡œ, ì•„ë¦„ë‹¤ìš´ ì „í†µ ê±´ì¶•ê³¼ ì •ì›ì„ ê°ìƒí•˜ë©° ì‚¬ì§„ì„ ì°ì„ ìˆ˜ ìˆëŠ” ëª…ì†Œì…ë‹ˆë‹¤.",
            "latitude": 37.2876,
            "longitude": 127.0147,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ í–‰ê¶ë¡œ 99",
            "tags": ["ì—­ì‚¬", "ê±´ì¶•", "ì‚¬ì§„", "ë¬¸í™”"],
            "badge_reward": "ğŸ“·",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›SKì•„íŠ¸ë¦¬ì›€",
            "description": "ë‹¤ì–‘í•œ ê³µì—°ê³¼ ì „ì‹œê°€ ì—´ë¦¬ëŠ” ë¬¸í™” ë³µí•© ê³µê°„. í•¨ê»˜ ì˜ˆìˆ  ì‘í’ˆì„ ê°ìƒí•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2683,
            "longitude": 127.0278,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 264",
            "tags": ["ë¬¸í™”", "ê³µì—°", "ì „ì‹œ", "ì˜ˆìˆ "],
            "badge_reward": "ğŸ­",
            "points_reward": 500,
        },
        {
            "name": "ê´‘êµí˜¸ìˆ˜ ì•¼ê²½ í¬í† ì¡´",
            "description": "ì•„ë¦„ë‹¤ìš´ í˜¸ìˆ˜ì™€ ì•¼ê²½ì„ ë°°ê²½ìœ¼ë¡œ ë©‹ì§„ ì‚¬ì§„ì„ ì°ì„ ìˆ˜ ìˆëŠ” í¬í† ì¡´. ì¶”ì–µì„ ë‚¨ê¸°ê¸°ì— ì™„ë²½í•œ ì¥ì†Œì…ë‹ˆë‹¤.",
            "latitude": 37.2889,
            "longitude": 127.0511,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµí˜¸ìˆ˜ë¡œ 142",
            "tags": ["ì‚¬ì§„", "ì•¼ê²½", "í¬í† ì¡´", "ë¡œë§¨í‹±"],
            "badge_reward": "ğŸ“¸",
            "points_reward": 500,
        },
    ],
    "ì—ë„ˆì§€ ì¶©ì „ì†Œ": [
        {
            "name": "ìˆ˜ì› í™”ì„± ì„±ê³½ê¸¸",
            "description": "ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ë¬¸í™”ìœ ì‚°ì¸ ìˆ˜ì› í™”ì„±ì„ ë”°ë¼ ê±·ëŠ” ë¡œë§¨í‹±í•œ ì‚°ì±… ì½”ìŠ¤. ì•„ë¦„ë‹¤ìš´ ê²½ê´€ê³¼ ì—­ì‚¬ì  ì˜ë¯¸ë¥¼ í•¨ê»˜ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2886,
            "longitude": 127.0123,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì •ì¡°ë¡œ 825",
            "tags": ["ì‚°ì±…", "ì—­ì‚¬", "ë¡œë§¨í‹±", "ì•¼ì™¸"],
            "badge_reward": "ğŸƒ",
            "points_reward": 500,
        },
        {
            "name": "ê´‘êµí˜¸ìˆ˜ê³µì›",
            "description": "í˜¸ìˆ˜ ì£¼ë³€ì„ ë”°ë¼ ì‚°ì±…í•˜ë©° ì•„ë¦„ë‹¤ìš´ ì•¼ê²½ì„ ê°ìƒí•  ìˆ˜ ìˆëŠ” ëª…ì†Œì…ë‹ˆë‹¤.",
            "latitude": 37.2889,
            "longitude": 127.0511,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµí˜¸ìˆ˜ë¡œ 142",
            "tags": ["ì•¼ê²½", "ê³µì›", "ì‚°ì±…", "ë¡œë§¨í‹±"],
            "badge_reward": "ğŸï¸",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ì¢…í•©ìš´ë™ì¥",
            "description": "ë‹¤ì–‘í•œ ìŠ¤í¬ì¸  í™œë™ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì¢…í•©ìš´ë™ì¥. í•¨ê»˜ ìš´ë™í•˜ë©° ê±´ê°•í•œ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2978,
            "longitude": 127.0094,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›ì²œë™",
            "tags": ["ìš´ë™", "ìŠ¤í¬ì¸ ", "í™œë™", "ê±´ê°•"],
            "badge_reward": "âš½",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ëœë“œ",
            "description": "ë‹¤ì–‘í•œ ë†€ì´ê¸°êµ¬ì™€ í…Œë§ˆíŒŒí¬ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ëŒ€í˜• ë†€ì´ê³µì›. í•¨ê»˜ ëª¨í—˜ê³¼ ìŠ¤ë¦´ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2917,
            "longitude": 127.0092,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµí˜¸ìˆ˜ë¡œ 288",
            "tags": ["í…Œë§ˆíŒŒí¬", "ë†€ì´ê¸°êµ¬", "ëª¨í—˜", "ìŠ¤ë¦´"],
            "badge_reward": "ğŸ¢",
            "points_reward": 500,
        },
        {
            "name": "ê´‘êµì‚° ë‘˜ë ˆê¸¸",
            "description": "ìì—° ì†ì—ì„œ í•¨ê»˜ ê±·ê³  ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©° íë§í•  ìˆ˜ ìˆëŠ” ë“±ì‚°ë¡œ. ì ë‹¹í•œ ë‚œì´ë„ë¡œ ì´ˆë³´ìë„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2944,
            "longitude": 127.0447,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì´ì˜ë™",
            "tags": ["ë“±ì‚°", "ì‚°ì±…", "ìì—°", "í™œë™"],
            "badge_reward": "â›°ï¸",
            "points_reward": 500,
        },
    ],
    "ì§€ì‹ êµí™˜ì†Œ": [
        {
            "name": "ìˆ˜ì›ì‹œì²­ì‚¬ëŒë„ì„œê´€",
            "description": "ë„“ê³  ì¾Œì í•œ í™˜ê²½ì—ì„œ í•¨ê»˜ ì±…ì„ ì½ìœ¼ë©° ì§€ì‹ì„ ê³µìœ í•  ìˆ˜ ìˆëŠ” ë„ì„œê´€ì…ë‹ˆë‹¤.",
            "latitude": 37.2639,
            "longitude": 127.0286,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 399",
            "tags": ["ë„ì„œê´€", "ë…ì„œ", "í•™ìŠµ", "ì§€ì‹"],
            "badge_reward": "ğŸ“–",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ê³¼í•™ê´€",
            "description": "ì²´í—˜í˜• ì „ì‹œë¥¼ í†µí•´ ê³¼í•™ì„ ì¬ë¯¸ìˆê²Œ ë°°ìš¸ ìˆ˜ ìˆëŠ” ê³¼í•™ê´€. í•¨ê»˜ í˜¸ê¸°ì‹¬ì„ ë‚˜ëˆ„ë©° í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2689,
            "longitude": 127.0331,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 264",
            "tags": ["ê³¼í•™ê´€", "ì²´í—˜", "êµìœ¡", "í•™ìŠµ"],
            "badge_reward": "ğŸ”¬",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›í™”ì„±ë°•ë¬¼ê´€ ì „ì‹œê´€",
            "description": "ìˆ˜ì› í™”ì„±ì˜ ì—­ì‚¬ì  ì˜ë¯¸ì™€ ê±´ì¶• ê¸°ìˆ ì„ ë°°ìš¸ ìˆ˜ ìˆëŠ” ì „ì‹œ ê³µê°„. í•¨ê»˜ ì—­ì‚¬ë¥¼ íƒêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2892,
            "longitude": 127.0125,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì •ì¡°ë¡œ 825",
            "tags": ["ë°•ë¬¼ê´€", "ì—­ì‚¬", "êµìœ¡", "ì „ì‹œ"],
            "badge_reward": "ğŸ“œ",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ì‹œì²­ì‚¬ëŒë„ì„œê´€ ë¶ì¹´í˜",
            "description": "ë„ì„œê´€ ë‚´ë¶€ì— ìœ„ì¹˜í•œ í¸ì•ˆí•œ ë¶ì¹´í˜. ì±…ì„ ì½ìœ¼ë©° í•¨ê»˜ ì§€ì‹ì„ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ê³µê°„ì…ë‹ˆë‹¤.",
            "latitude": 37.2639,
            "longitude": 127.0286,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 399",
            "tags": ["ë„ì„œê´€", "ë¶ì¹´í˜", "ë…ì„œ", "í•™ìŠµ"],
            "badge_reward": "â˜•",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ì‹œë¯¼íšŒê´€ ë¬¸í™”ê°•ì¢Œ",
            "description": "ë‹¤ì–‘í•œ ë¬¸í™” ê°•ì¢Œì™€ ì„¸ë¯¸ë‚˜ê°€ ì—´ë¦¬ëŠ” ê³µê°„. í•¨ê»˜ ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ë©° ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2856,
            "longitude": 127.0181,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ ì¤‘ë¶€ëŒ€ë¡œ",
            "tags": ["ê°•ì¢Œ", "êµìœ¡", "ë¬¸í™”", "í•™ìŠµ"],
            "badge_reward": "ğŸ“",
            "points_reward": 500,
        },
    ],
    "íë§ ì•ˆì‹ì²˜": [
        {
            "name": "í–‰ê¶ë™ ì¹´í˜ê±°ë¦¬",
            "description": "ì•„ê¸°ìê¸°í•œ ì¹´í˜ë“¤ì´ ëª¨ì—¬ ìˆëŠ” ê±°ë¦¬. ë‹¤ì–‘í•œ ë¶„ìœ„ê¸°ì˜ ì¹´í˜ì—ì„œ ì—¬ìœ ë¡œìš´ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2861,
            "longitude": 127.0167,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ í–‰ê¶ë¡œ",
            "tags": ["ì¹´í˜", "ë°ì´íŠ¸", "ì‹¤ë‚´", "íë§"],
            "badge_reward": "â˜•",
            "points_reward": 500,
        },
        {
            "name": "ì˜í†µê³µì›",
            "description": "ì‹œë‚´ í•œê°€ìš´ë° ìœ„ì¹˜í•œ ì¡°ìš©í•œ ê³µì›. í•¨ê»˜ ì‚°ì±…í•˜ë©° í‰ì˜¨í•œ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2511,
            "longitude": 127.0711,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›ì²œë™",
            "tags": ["ê³µì›", "ì‚°ì±…", "íœ´ì‹", "íë§"],
            "badge_reward": "ğŸŒ³",
            "points_reward": 500,
        },
        {
            "name": "ê´‘êµí˜¸ìˆ˜ ì¹´í˜í…Œë¼ìŠ¤",
            "description": "í˜¸ìˆ˜ë¥¼ ë°”ë¼ë³´ë©° ì—¬ìœ ë¡­ê²Œ ì°¨ë¥¼ ë§ˆì‹¤ ìˆ˜ ìˆëŠ” ì¹´í˜í…Œë¼ìŠ¤. ì•„ë¦„ë‹¤ìš´ ê²½ê´€ê³¼ í•¨ê»˜ íë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2878,
            "longitude": 127.0494,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµí˜¸ìˆ˜ë¡œ",
            "tags": ["ì¹´í˜", "í˜¸ìˆ˜", "ì•¼ê²½", "íë§"],
            "badge_reward": "ğŸŒŠ",
            "points_reward": 500,
        },
        {
            "name": "í™”ì„±í–‰ê¶ í›„ì›",
            "description": "ì¡°ì„ ì‹œëŒ€ ì •ì›ì˜ ì•„ë¦„ë‹¤ì›€ì„ ê°ìƒí•  ìˆ˜ ìˆëŠ” í›„ì›. í•¨ê»˜ ëª…ìƒí•˜ë©° í‰ì˜¨í•¨ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2876,
            "longitude": 127.0147,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬ í–‰ê¶ë¡œ 99",
            "tags": ["ì •ì›", "ëª…ìƒ", "íœ´ì‹", "íë§"],
            "badge_reward": "ğŸŒ¸",
            "points_reward": 500,
        },
        {
            "name": "ìˆ˜ì›ì‹œì²­ì‚¬ëŒë„ì„œê´€ íœ´ê²Œì‹¤",
            "description": "ë„ì„œê´€ ë‚´ë¶€ì˜ ì¡°ìš©í•˜ê³  í¸ì•ˆí•œ íœ´ê²Œ ê³µê°„. í•¨ê»˜ ì±…ì„ ì½ìœ¼ë©° ì—¬ìœ ë¡œìš´ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            "latitude": 37.2639,
            "longitude": 127.0286,
            "address": "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì›”ë“œì»µë¡œ 399",
            "tags": ["ë„ì„œê´€", "íœ´ì‹", "ë…ì„œ", "íë§"],
            "badge_reward": "ğŸ›‹ï¸",
            "points_reward": 500,
        },
    ],
}


async def init_challenge_places():
    """ì±Œë¦°ì§€ ì¹´í…Œê³ ë¦¬ ë° ì¥ì†Œ ì´ˆê¸° ë°ì´í„° ì‚½ì…"""
    client = MongoConnectionManager.get_client()
    db = client[settings.mongodb_db]
    
    print("ì±Œë¦°ì§€ ì¹´í…Œê³ ë¦¬ ë° ì¥ì†Œ ì´ˆê¸° ë°ì´í„° ì‚½ì…ì„ ì‹œì‘í•©ë‹ˆë‹¤...\n")
    
    # 1ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ ìƒì„±
    print("=" * 50)
    print("1ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ ìƒì„±")
    print("=" * 50)
    category_map = {}  # ì¹´í…Œê³ ë¦¬ ì´ë¦„ -> category_id ë§¤í•‘
    
    for category_data in CATEGORIES:
        # ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
        existing = await db["challenge_categories"].find_one({"name": category_data["name"]})
        if existing:
            category_id = str(existing["_id"])
            category_map[category_data["name"]] = category_id
            print(f"  âœ“ {category_data['name']}: ì´ë¯¸ ì¡´ì¬ (ID: {category_id})")
        else:
            # ì¹´í…Œê³ ë¦¬ ìƒì„±
            try:
                result = await create_challenge_category(db, category_data)
                category_id = result["id"]
                category_map[category_data["name"]] = category_id
                print(f"  âœ“ {category_data['name']}: ìƒì„± ì™„ë£Œ (ID: {category_id})")
            except Exception as e:
                print(f"  âœ— {category_data['name']}: ìƒì„± ì‹¤íŒ¨ - {e}")
                continue
    
    # 2ë‹¨ê³„: ê¸°ì¡´ ì¥ì†Œ ë¹„í™œì„±í™” (ê¸°ì¡´ 5ê°œ ì¥ì†Œ ì œê±° ëŒ€ì‹ )
    print("\n" + "=" * 50)
    print("2ë‹¨ê³„: ê¸°ì¡´ ì¥ì†Œ ë¹„í™œì„±í™”")
    print("=" * 50)
    existing_places = await db["challenge_places"].find({}).to_list(length=None)
    if existing_places:
        result = await db["challenge_places"].update_many(
            {},
            {"$set": {"active": False, "updated_at": datetime.utcnow()}}
        )
        print(f"  âœ“ ê¸°ì¡´ {result.modified_count}ê°œ ì¥ì†Œë¥¼ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.")
    
    # 3ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ë³„ ì¥ì†Œ ìƒì„±
    print("\n" + "=" * 50)
    print("3ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ë³„ ì¥ì†Œ ìƒì„±")
    print("=" * 50)
    
    total_places = 0
    for category_name, places in CHALLENGE_PLACES.items():
        category_id = category_map.get(category_name)
        if not category_id:
            print(f"  âœ— {category_name}: ì¹´í…Œê³ ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ì¥ì†Œ ìƒì„±ì„ ê±´ë„ˆëœë‹ˆë‹¤.")
            continue
        
        print(f"\n  [{category_name}] ì¹´í…Œê³ ë¦¬ ì¥ì†Œ ìƒì„±:")
        for place_data in places:
            # category_id ì¶”ê°€
            place_data["category_id"] = category_id
            
            # ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ (ì´ë¦„ìœ¼ë¡œ)
            existing = await db["challenge_places"].find_one({"name": place_data["name"]})
            if existing:
                # ê¸°ì¡´ ë°ì´í„° ì—…ë°ì´íŠ¸ (category_id í¬í•¨)
                update_data = {
                    "latitude": place_data["latitude"],
                    "longitude": place_data["longitude"],
                    "description": place_data["description"],
                    "address": place_data["address"],
                    "category_id": ObjectId(category_id),
                    "tags": place_data["tags"],
                    "badge_reward": place_data["badge_reward"],
                    "points_reward": place_data["points_reward"],
                    "active": True,
                    "updated_at": datetime.utcnow()
                }
                await db["challenge_places"].update_one(
                    {"name": place_data["name"]},
                    {"$set": update_data}
                )
                print(f"    âœ“ {place_data['name']}: ì—…ë°ì´íŠ¸ ì™„ë£Œ")
                total_places += 1
            else:
                # ìƒˆ ì¥ì†Œ ìƒì„±
                try:
                    result = await create_challenge_place(db, place_data)
                    print(f"    âœ“ {place_data['name']}: ìƒì„± ì™„ë£Œ (ID: {result['id']})")
                    total_places += 1
                except Exception as e:
                    print(f"    âœ— {place_data['name']}: ìƒì„± ì‹¤íŒ¨ - {e}")
    
    print("\n" + "=" * 50)
    print("ì´ˆê¸°í™” ì™„ë£Œ!")
    print("=" * 50)
    print(f"ì´ {len(category_map)}ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.")
    print(f"ì´ {total_places}ê°œì˜ ì±Œë¦°ì§€ ì¥ì†Œê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.")


if __name__ == "__main__":
    asyncio.run(init_challenge_places())